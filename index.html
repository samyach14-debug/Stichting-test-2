<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stichting Al-Wahhaab</title>

  <!-- Favicon (mag je later aanpassen) -->
  <link href="https://gtpypzczjebvfcijhnyt.supabase.co/storage/v1/object/public/base44-prod/public/692f0e4a062c2e185c133d87/044086fc1_logo.png" rel="icon" type="image/svg+xml" />

  <!-- JOUW CSS (in de assets map) -->
  <link rel="stylesheet" href="assets/index-Cx6udGG2.css" />

  <!-- JOUW JS (in de assets map) -->
  <script type="module" src="assets/index-CV8LcnsC.js"></script>

   <!-- âœ… EXTRA SCRIPT: Supabase + e-mail input + knop -->
  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const supabaseUrl = "https://ogrvseiqelnhczeeqeux.supabase.co";
    const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ncnZzZWlxZWxuaGN6ZWVxZXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3Njk3MDQsImV4cCI6MjA4MDM0NTcwNH0.qbZPSSDsYS_riThsI6NDf7gNaqKwhSfCnmM52Kssyhc";

    const supabase = createClient(supabaseUrl, supabaseAnonKey);

    window.addEventListener("load", () => {
      // Pak het eerste e-mailveld op de pagina
      const emailInput = document.querySelector('input[type="email"]');

      if (!emailInput) {
        console.warn("Geen e-mail input gevonden.");
        return;
      }

      // Zoek een knop in dezelfde "sectie" (dichtbij het e-mailveld)
      const container =
        emailInput.closest("form, section, div") || document;
      const submitButton = container.querySelector(
        "button, input[type='submit']"
      );

      if (!submitButton) {
        console.warn("Geen knop gevonden bij het e-mailveld.");
        return;
      }

      console.log(
        "E-mailveld en knop gevonden:",
        emailInput,
        submitButton
      );

      const handleSubmit = async (event) => {
        event.preventDefault();

        const email = emailInput.value.trim();
        if (!email) {
          alert("Vul alstublieft een geldig e-mailadres in.");
          return;
        }

        try {
          const { error } = await supabase
            .from("email_subscribers")
            .insert({ email });

          if (error) {
            console.error("Supabase error:", error);
            alert(
              "Er ging iets mis bij het opslaan. Probeer het later opnieuw."
            );
            return;
          }

          alert("BarakAllahu fiek, jouw e-mailadres is opgeslagen.");
          emailInput.value = "";
        } catch (err) {
          console.error("Onverwachte fout:", err);
          alert("Er ging iets mis. Probeer het later opnieuw.");
        }
      };

      // Klik op knop -> submit
      submitButton.addEventListener("click", handleSubmit);

      // Enter in het inputveld -> ook submit
      emailInput.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          handleSubmit(event);
        }
      });
    });
  </script>


